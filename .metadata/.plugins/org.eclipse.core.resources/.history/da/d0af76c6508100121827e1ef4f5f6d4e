package com.valleskeyp.tubehub;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPut;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.IntentService;
import android.content.Intent;

public class UploadService extends IntentService {
	public static final String PARAM_IN_MSG = "imsg";
	public static final String PARAM_OUT_MSG = "omsg";
	
	public UploadService() {
		super("UploadService");
	}

	@Override
	protected void onHandleIntent(Intent intent) {
		String access_token = intent.getStringExtra(PARAM_IN_MSG);
		
		HttpClient httpClient = new DefaultHttpClient();
		
		httpClient = new DefaultHttpClient();

		HttpPut httpPut = new HttpPut("https://www.googleapis.com/youtube/v3/video?part=snippet&access_token=" + access_token);

		String youTubeChannels = null;
		try {
			HttpResponse httpResponse = httpClient.execute(httpPut);
			InputStream inputStream = httpResponse.getEntity().getContent();
			InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
			BufferedReader bufferedReader = new BufferedReader(inputStreamReader);
			StringBuilder stringBuilder = new StringBuilder();
			String bufferedStrChunk = null;
			while((bufferedStrChunk = bufferedReader.readLine()) != null) {
				stringBuilder.append(bufferedStrChunk);
			}
			youTubeChannels = stringBuilder.toString();

		} catch (ClientProtocolException cpe) {
			System.out.println("First Exception cause of HttpResponese :" + cpe);
			cpe.printStackTrace();
		} catch (IOException ioe) {
			System.out.println("Second Exception cause of HttpResponse :" + ioe);
			ioe.printStackTrace();
		}
		
	}

}
